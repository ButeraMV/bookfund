language: ruby
rvm:
- 2.4.1
env:
- DB=postgresql
script:
- bundle exec rspec
- bundle exec brakeman --exit-on-warn --quiet -f plain
before_install:
  - gem update bundler
before_script:
- bundle exec rake db:create
- RAILS_ENV=test bundle exec rake db:migrate --trace
- bundle exec rake db:test:prepare
bundler_args: "--binstubs=./bundler_stubs"
deploy:
  provider: heroku
  api_key:
    secure: HA9HIWhJaTMtIScKtUuc6H6FWtLDjRhMtaGg3SPnFW2PbWFX4zOQX0MwnvSiHvvlMvSXxicTLrhdP+oHz0KSpllwBz5zx5OOz7Alsnvnbttno6VarAGuAqG13r9L+gS81l0tgdT2tvXIDz2AiV5xTCU8OTG/VAsJ1EIt/lfbpx29M/4P1c5bWYUpzCzJREiGP6NDD89JG3V/clc1PK+4BHtOT9BbnZ334pv36JlU8ErKmg7ZHq6AVjnuIxlZO8cQDuloERx/EZN6QB1u1AQRudROlNmZm9wzFLoYkkbqLS4bBdG6RbnHIYwNokyVScT4BUwJjJ/ccCXnYwdm51cWaw+Lvc+/uMT7RZHFkDJ5FCOpek5pvWsVLZdShbqNjJ9aXLUNqoL7pU7H9tGNF41KRMiuux9x4S/MgA218h7I0FTgWHGlFUDOJmL/IvhBx2WjwYAN1vZv0O4SW0uJ4186PRUnY2Imc6cDFZJ18feQZthMaq/cvn2Ri1Eurg/j489zjNTHuFuBAbDm9yqK2pkRkGM1Fa+VATJ2WLWLTNGCJ7rQQICHmovlF3C1uyfm2yqFS9L6bOzz2hkFMBkmmM1XBRgUBW13BobXdsM7dR1NrXy0BnO3Dx/c+OtqaJsHTYuBi+OIikkohdpHG3Apf0+4Ats4ahP7dviDNQqQ5SFiYZk=
  app: bookfund
  on:
    repo: ButeraMV/bookfund
